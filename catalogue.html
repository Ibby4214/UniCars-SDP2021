<!DOCTYPE html>
<html lang="en">
  <head>
    <!-- ***********************  HEADER  *********************** -->
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script type="text/javascript" src="xhr.js"></script>
    <script type="text/javascript" src="admin.js"> </script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Open+Sans&family=PT+Serif&family=Poppins:wght@500&display=swap" rel="stylesheet">
    <meta name="google-signin-client_id" content="773304142493-8agont039ue3v46c7qv8fll90c8d95vt.apps.googleusercontent.com">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.1/dist/css/bootstrap.min.css"  rel="stylesheet" integrity="sha384-F3w7mX95PdgyTmZZMECAngseQB83DfGTowi0iMjiWaeVhAn4FJkqJByhZMI3AhiU" crossorigin="anonymous">
    <link rel="stylesheet" href="css/catalogue-styles.css">
    <style>
        .car_image{
            width: 300px;
            height: 200px;
            border-radius: 8px;
        }
        .cat_row{
          padding: 20px;
        }

        .text-left{
          text-align: left !important;
        }
        .flex{
          display: flex;
        }
        .half{
          width: 50%;
        }
    </style>
    <header>

      <script src="signout.js"></script>
      <script src="https://apis.google.com/js/platform.js" async defer></script>
      <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.1/dist/js/bootstrap.bundle.min.js"
       integrity="sha384-/bQdsTh/da6pkI1MST/rWKFNjaCP5gBSY4sEBT38Q/9RBh9AH40zEOg7Hlq2THRZ" crossorigin="anonymous"></script>
       <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>

      <title>UniCars</title>
      <a href="index.html">
        <img class="logo"src="images\UniCars2.png" >
      </a>
          <div class="g-signin2" data-onsuccess="onSignIn"></div>
          <div class="data">
            <p id="name"></p>
            <img id="image" class="rounded-circle" width="50" height="50" />
            <button type="button" class="btn btn-danger" onclick="signOut();">Sign Out</button>
          </div>
          <button onclick="location.href='register.html'" class="btn-group">Sign-up</button>
          <button onclick="location.href='login.html'" class="btn-group login-btn">Login</button>
    </header>
  </head>
    <body >

    <main>
      <!-- ***********************  NAVIGATION BAR  *********************** -->
      <div class="topnav">
        <a href="index.html">Home</a>
        <a class="active" href="catalogue.html">Catalogue</a>
        <a href="contact.html">Contact</a>
        <a href="about.html">About</a>
      </div>
  
      <!-- ********************  ABOUT BODY  ********************* -->
      <div class="container">
        <div class="box">
            <section class = "welcome"> <!-- using class welcome as placeholder 
                while css file isnt made-->
                  <h1>CATALOGUE</h1>
                  <form  onsubmit="event.preventDefault()">
                    <label>Please Type in a keyword for a specific vehicle<input type="text" name="bsearch" id="search_input" > </label>
                    <input name="sbutton" type = "button" onclick="getList('search',document.getElementById('search_input').value)" value = "Search">
                  </form>

                  <br/>
                  <div class="row">
                    <div class="form-group col-md-6">
                      <label>Make</label>
                      <select  onchange="getList('filter',this.value)" id="make_select"  >
                        <option value=""  selected="" >Select Filter </option>
                        <option value= "Alpha Romeo">Alpha Romeo</option>
                        <option value= "BMW">BMW</option>
                        <option value= "Suzuki">Suzuki</option>
                        <option value= "Ford">Ford</option>
                        <option value= "Holden">Holden</option>
                        <option value= "Subaru">Subaru</option> 
                        <option value= "Lexus">Lexus</option>
                        <option value= "Toyota">Toyota</option>
                      </select>
                    </div>
                    <div class="form-group col-md-6">
                      <label>Fuel</label>
                      <select  onchange="getList('filter',this.value)"  id="fuel_select" >
                        <option value=""  selected="" >Select Filter </option>
                        <option value= "Petrol">Petrol</option>
                        <option value= "Diesel">Diesel</option>
                        <option value= "Hybrid">Hybrid</option>
                      </select>
                    </div>

                    <div class="form-group col-md-6">
                      <label>Transmission</label>
                      <select  onchange="getList('filter',this.value)"  id="transselect" >
                        <option value=""  selected="" >Select Filter </option>
                        <option value= "Automatic">Automatic</option>
                        <option value= "Manual">Manual</option>
                        
                      </select>
                    </div>

                    <div class="form-group col-md-6">
                      <label>Body-Style</label>
                      <select  onchange="getList('filter',this.value)"  id="bstyleselect" >
                        <option value=""  selected="" >Select Filter </option>
                        <option value= "Other">Other</option>
                        <option value= "Hatchback">Hatchback</option>
                        <option value= "Sedan">Sedan</option>
                        <option value= "Station Wagon">Station Wagon</option>
                        <option value= "RV/SUV">RV/SUV </option>
                        <option value= "Convertible">Convertible </option>
                        
                      </select>
                    </div>


                  </div>


                  <div class= "content" id="MAIN_CONTENT" >

                 
                  </div> 
                </section>
              </div>  
        </div>
      
      <!-- *****************  FOOTER  ***************** -->
      <footer>
        <div class="content-wrap">
          <h1>SOCIAL MEDIA</h1>
          <!-- Social media and contact links. Add or remove any networks. -->
            <span>
              <a href="https://twitter.com/home">
                <img class = "links"  src="images\twitter.png">
                <a href="https://www.linkedin.com/in/william-quinn-03694a218/">
                <img class = "links"  src="images\linkedin.png">
                <a href="https://www.facebook.com">
                <img class = "links"  src="images\facebook.png">
            </span>
        </div>
      </footer>
    </main>


    <script type="text/javascript">

      var page_data = "";
      var is_mod = 0;

      function getList(type,string){

        if (type!="regular"){
          is_mod = 1;
          $('#MAIN_CONTENT').html("...");
        }



        var fuel = $('#fuel_select').val();
        var transmission = $('#transselect').val();
        var make = $('#make_select').val();
        var bodystyle = $('#bstyleselect').val();

        if(type=="filter"){
          if (fuel=="" && make=="" && transmission=="" && bodystyle==""){
            page_data = "";
            is_mod = 0;  
          }
        }

         $.post("ajax_data.php",
          {
            type: type,
            string: string,
            fuel:fuel,
            make:make,
            transmission:transmission,
            bodystyle:bodystyle,

            
          },
          function(data, status){

            if (is_mod==0){
              if (page_data!=data){
                  page_data = data;
                  $('#MAIN_CONTENT').html(data); 
              } 
            }

            if (is_mod==1 && type!="regular"){
              $('#MAIN_CONTENT').html(data);
            }

          });

      }

      /*------------------------------------------------*/


      $(document).ready(function(){
        getList('regular');
        setInterval(function(){ getList('regular'); }, 3000);
      });
      
      
    </script>
